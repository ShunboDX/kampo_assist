<!DOCTYPE html>
<html>
  <head>
    <% site_name = "漢方アシスト" %>
    <% page_title = content_for?(:title) ? "#{yield(:title)} | #{site_name}" : site_name %>
    <% page_desc  = content_for?(:description) ? yield(:description) : "症状・病名から適応する漢方薬候補をスコアリングして提示する支援ツールです。" %>
    <% page_url   = request.original_url %>
    <% ogp_image  = "#{request.base_url}/ogp.png" %>

    <title><%= page_title %></title>

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="<%= page_desc %>">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Kampo Assist">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- OGP -->
    <meta property="og:site_name" content="<%= site_name %>">
    <meta property="og:title" content="<%= page_title %>">
    <meta property="og:description" content="<%= page_desc %>">
    <meta property="og:type" content="website">
    <meta property="og:url" content="<%= request.original_url %>">
    <meta property="og:image" content="https://kampo-assist-1.onrender.com/ogp.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= page_title %>">
    <meta name="twitter:description" content="<%= page_desc %>">
    <meta name="twitter:image" content="https://kampo-assist-1.onrender.com/ogp.png">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= yield :head %>

    <link rel="icon" href="/icon.png" type="image/png">
    <link rel="icon" href="/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/icon.png">

    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>


  <body>
    <header>
      <nav>
        <% if current_user %>
          <span>ログイン中</span> |
          <%= link_to "お気に入り", favorites_path %> |
          <%= button_to "ログアウト", user_session_path, method: :delete %>
        <% else %>
          <%= link_to "ログイン", new_user_session_path %> |
          <%= link_to "新規登録", new_user_path %>
        <% end %>
      </nav>
    </header>
  
    <% if flash[:notice] %>
      <p class="flash notice"><%= flash[:notice] %></p>
    <% end %>

    <% if flash[:alert] %>
      <p class="flash alert"><%= flash[:alert] %></p>
    <% end %>

    <%= yield %>

    <footer>
      <nav>
        <%= link_to "使い方", how_to_path %> |
        <%= link_to "利用規約", terms_path %> |
        <%= link_to "プライバシーポリシー", privacy_path %>
      </nav>
    </footer>
  </body>
</html>
