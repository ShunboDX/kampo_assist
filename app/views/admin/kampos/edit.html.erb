<div class="bg-slate-50 min-h-screen">
  <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-6">

    <!-- Flash -->
    <% if flash[:notice] %>
      <div class="rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-900">
        <%= flash[:notice] %>
      </div>
    <% end %>

    <% if flash[:alert] %>
      <div class="rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-900">
        <%= flash[:alert] %>
      </div>
    <% end %>

    <header class="space-y-2">
      <h1 class="text-2xl md:text-3xl font-extrabold tracking-tight text-slate-900">
        漢方編集（Admin）
      </h1>

      <div>
        <%= link_to "← 一覧に戻る", admin_kampos_path,
              class: "inline-flex items-center justify-center rounded-xl
                      border border-slate-300 bg-white px-4 py-2 text-sm font-semibold text-slate-700
                      hover:bg-slate-50 transition" %>
      </div>
    </header>

    <section class="rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
      <%= form_with model: [:admin, @kampo], local: true, class: "space-y-8" do |f| %>

        <% if @kampo.errors.any? %>
          <div class="rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-900 space-y-2">
            <p class="font-semibold"><%= @kampo.errors.count %>件のエラーがあります</p>
            <ul class="list-disc list-inside space-y-1">
              <% @kampo.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <!-- ✅ 名前 + かな：SP1列 / PC2列 -->
        <div class="grid gap-6 sm:grid-cols-2">
          <div class="space-y-2">
            <%= f.label :name, "漢方名", class: "block text-sm font-semibold text-slate-900" %>
            <%= f.text_field :name,
                  class: "!w-full block rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm sm:text-base
                          focus:border-emerald-600 focus:ring-2 focus:ring-emerald-200" %>
          </div>

          <div class="space-y-2">
            <%= f.label :kana_name, "かな", class: "block text-sm font-semibold text-slate-900" %>
            <%= f.text_field :kana_name,
                  class: "!w-full block rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm sm:text-base
                          focus:border-emerald-600 focus:ring-2 focus:ring-emerald-200" %>
          </div>
        </div>

        <!-- note -->
        <div class="space-y-2">
          <%= f.label :note, "note（概要・適応など）", class: "block text-sm font-semibold text-slate-900" %>
          <%= f.text_area :note,
                rows: 6,
                placeholder: "例：虚証で冷え性・貧血傾向のある患者に用いる",
                class: "!w-full block rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm sm:text-base
                        leading-relaxed resize-y min-h-[10rem]
                        focus:border-emerald-600 focus:ring-2 focus:ring-emerald-200" %>
        </div>

        <!-- detail -->
        <div class="space-y-2">
          <div class="flex items-baseline justify-between gap-3">
            <%= f.label :detail, "detail（禁忌・慎重投与・併用注意）", class: "block text-sm font-semibold text-slate-900" %>
            <p class="text-xs text-slate-500">テンプレ形式で記載</p>
          </div>

          <%= f.text_area :detail,
                rows: 12,
                placeholder: "【禁忌】\n・\n\n【慎重投与】\n・\n\n【併用注意】\n・",
                class: "!w-full block rounded-xl border border-slate-300 bg-white px-4 py-3 text-sm sm:text-base
                        leading-relaxed resize-y font-mono min-h-[18rem]
                        focus:border-emerald-600 focus:ring-2 focus:ring-emerald-200" %>

          <p class="text-xs text-slate-600">
            ※ 禁忌・慎重投与・併用注意はこの形式で記載してください（未登録の場合は空のまま保存してください）
          </p>
        </div>

        <!-- Actions -->
        <div class="flex flex-col sm:flex-row sm:justify-end gap-3 pt-2">
          <%= f.submit "更新する",
                class: "w-full sm:w-auto inline-flex items-center justify-center rounded-xl
                        bg-emerald-700 px-6 py-3 text-sm font-bold text-white
                        hover:bg-emerald-800 transition" %>
        </div>
      <% end %>
    </section>

  </div>
</div>