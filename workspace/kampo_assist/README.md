# kampo_assist
## サービス概要
医療従事者が、患者の症状や体質・既往歴などを入力することで、候補となる漢方薬をある程度まで自動で絞り込んでくれる「漢方処方支援アプリ」です。最終的な処方判断は医療従事者が行う前提で、その前段階の「候補出し・整理」をサポートします。


## このサービスへの思い・作りたい理由
父と話しているときに「漢方って、もっと選びやすくなる仕組みがあればいいのに」という話題になったことがきっかけです。
一般的な薬は、ガイドラインやエビデンスに基づいて、症状からある程度パターン化して選ぶことができますが、漢方は医師の経験や感覚的な判断に依存する部分が大きく、「どれを選ぶか」がブラックボックスになりがちです。また、判断基準を照らし合わせても候補が多岐にわたり、専門の先生でも迷ってしまうことがあると聞きました。
そうした「選びにくさ」を少しでも減らし、
* 候補をまず数個に絞ってあげる
* 判断基準を見える化する
ことで、現場の負担を軽くできたらと思い、このサービスを作ろうと考えました。


## ユーザー層について
決めたユーザー層についてどうしてその層を対象にしたのかそれぞれ理由を教えてください。
想定しているユーザー層と、その理由
1. 医師（特に漢方も扱う一般内科・心療内科など）
    * 漢方を処方したいが、漢方専門ではなく「どの漢方を選ぶか」に悩みやすい層。
    * 多忙な外来の中で、1人の患者さんにじっくり漢方を検討する時間が取りづらく、「候補を数個まで絞ってくれるツール」があると意思決定が早くなるため。
2. 薬剤師（調剤薬局・病院薬剤部）
    * 処方提案や疑義照会の際に、「この症状ならこういう漢方も候補になる」という裏付けとして使える。
    * 医師に説明する際の補助資料としても使えるため、「エビデンス＋候補の見える化」のニーズがある。
3. 漢方に興味を持ち始めた若手医療従事者（研修医・若手薬剤師など）
    * 本格的な漢方教育を受ける前の段階で、「症状からこういう漢方が挙がるんだ」という学習ツールとして使える。
    * 先輩に聞く前に自分で一度調べてみる・仮説を立てるための補助として有用。
※一般の患者さんではなく「医療関係者」を対象にしているのは、あくまで医療行為の意思決定はプロが行うべきであり、本サービスはその前段階の情報整理・候補提示に特化したいからです。


## サービスの利用イメージ
利用フロー（イメージ）
1. ユーザー（医療従事者）がアプリにアクセス
2. 患者さんの情報を入力
    * 主訴（例：冷え・不眠・食欲不振 など）
    * 体質・傾向（例：虚証／実証、冷えやすい、のぼせやすい など）
3. 条件を選択肢（チェックボックス・プルダウンなど）で入力
4. システムが条件にマッチする漢方薬をスコアリングし、候補を数個まで絞って提示
5. 各漢方の
    * 効果適応
    * 評価点を簡潔に確認できる
6. ユーザーはその中から、患者さんに合いそうなものをさらに精査し、最終的な処方を決定
得られる価値
* 候補出しの時間を短縮できる → 外来の負担軽減
* 「なんとなく」ではなく、条件に基づいて候補を見せてくれる → 判断の納得感が高まる
* 若手にとっては、漢方の学習ツールとしても機能する → 教育的価値
* 患者さんへの説明にも使える → 「なぜこの漢方なのか」を言語化しやすい


## ユーザーの獲得について
想定したユーザー層に対してそれぞれどのようにサービスを届けるのか現状考えていることがあれば教えてください。
身近な医療関係者へのヒアリング＆トライアル提供
* まずは父を含めた身近な医療従事者に実際に触ってもらい、フィードバックをもらう。
* 小さなクリニックや薬局に限定して、クローズドベータのような形で試してもらう。
情報発信（ブログ・Xなど）
* 「漢方でこんな時どう選ぶ？」のような記事を書き、その中でアプリのスクリーンショットや使い方を紹介。
* 漢方処方に悩んでいる医療従事者に届くようなキーワードで発信する。


## サービスの差別化ポイント・推しポイント
似たようなサービスが存在する場合、そのサービスとの明確な差別化ポイントとその差別化ポイントのどこが優れているのか教えてください。
独自性の強いサービスの場合、このサービスの推しとなるポイントを教えてください。
選ぶものはあるが、病状・症状合わして絞るものは見た所ないので推しになると思います。
1. 「病名」と「症状・体質」で絞れる
* 既存の医薬品検索は、病名や主な効能で絞り込むものが多い。
* 本サービスは、漢方特有の「症状」「体質」「証」などの組み合わせから候補を絞る点が特徴。
* 
2. 漢方専用の検索ロジック
* 一般薬のような単純な「病名 → 薬」ではなく、
    * 複数の症状
    * 体質傾向を加味してスコアリングする設計を想定。
* 「この症状には特に強く効く」といった重み付けができるようにすることで、漢方の専門性に寄せた検索が可能。
3. ブラックボックス化しがちな判断を「見える化」
* 各漢方が選ばれた理由（どの症状にマッチしているか）を一覧で表示することで、
    * 「なぜこの漢方が上位に来ているのか」が一目で分かるようにする。
* これにより、若手医療従事者の学習ツールとしても機能する点が推しポイント。


## 機能候補
現状作ろうと思っている機能、案段階の機能をしっかりと固まっていなくても構わないのでMVPリリース時に作っていたいもの、本リリースまでに作っていたいものをそれぞれ分けて教えてください。

MVPリリース時に実装したい機能
症状・体質と漢方の紐付け（多対多）
* 「この症状に特にマッチする度合い」をスコア（重み）で管理
候補漢方の検索・スコアリング機能
* ヒットした項目に応じてスコアを加算し、スコア順に表示

患者状態の入力画面
* 症状・体質のチェックボックス

候補漢方の検索・スコアリング機能
* ヒットした項目に応じてスコアを加算し、スコア順に表示

漢方詳細画面（簡易版）
* 適応症
* よく使われるパターン

漢方詳細画面（簡易版）
* 適応症
* よく使われるパターン
* 注意点・禁忌の簡単な表示

本リリースまでに追加したい機能
* ユーザー登録・ログイン機能（医療従事者アカウント）
* 患者ごとの「検索履歴」保存
    * 同じ患者の条件で、過去にどの漢方を検討したかを確認できる
* お気に入り・よく使う漢方の登録
「症例メモ」機能
* ユーザーが自分の言葉で症例メモを残せる


## 使用する技術スタック
一般的なCRUD以外の実装予定の機能についてそれぞれどのようなイメージで実装する予定なのか現状考えているもので良いので教えて下さい。
サービスを実装するための技術スタックについて、以下のような観点で記載してください。

フレームワーク
* バックエンド: Ruby on Rails 7系
    * 理由：自分の得意スタックであり、CRUD画面＋検索機能＋管理画面の実装効率が高い。
データベース
* PostgreSQL
    * Railsとの相性が良く、将来的に全文検索・JSONフィールドなども活用しやすい。
    * Heroku / Render など多くのPaaSで標準サポートされている。
デプロイ先
* Render または Fly.io などのPaaS
    * Railsアプリを簡単にデプロイできるサービス。
    * 初期は無料〜低コストで運用できるプランを想定。
使用予定のライブラリ・Gem
* 権限管理
    * Pundit：
        * 一般ユーザー（医療従事者）と管理者（マスタ編集権限あり）を分ける
* 検索・絞り込み
    * Ransack：症状・体質などの検索フォーム構築
        * ただし、独自スコアリング部分はサービスクラスやスコープで実装
* ページネーション
    * kaminari または pagy：検索結果一覧のページング
* 管理画面
    * administrate や rails_admin など（必要に応じて検討）